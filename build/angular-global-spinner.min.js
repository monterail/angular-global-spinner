/*! angular-global-spinner 2015-05-05 */
(function(){angular.module("globalSpinner",[]),angular.module("globalSpinner").provider("globalSpinner",function(){return{configure:function(a){return null==a&&(a={}),this.config=a},$get:function(){return angular.extend({timeout:1e3,eventStart:"globalSpinner:start",eventStop:"globalSpinner:stop"},this.config)}}}).config(function(a,b){return a.factory("globalSpinnerInterceptor",["$q","$injector","$timeout","globalSpinner",function(a,b,c,d){var e,f,g,h,i;return e=e||b.get("$rootScope"),i=null,f=function(){return i&&(c.cancel(i),i=null),e.$broadcast(d.eventStop)},h=function(){return i||(i=c(function(){return i=null,e.$broadcast(d.eventStart)},d.timeout))},g=function(){var a;return a=a||b.get("$http"),_.reduce(a.pendingRequests,function(a,b){return b.headers["X-Silent-Request"]||(a+=1),a},0)<1},{request:function(a){return a.headers["X-Silent-Request"]||h(),a},requestError:function(b){return g()&&f(),a.reject(response)},response:function(a){return g()&&f(),a},responseError:function(b){return g()&&f(),a.reject(b)}}}]),b.interceptors.push("globalSpinnerInterceptor")})}).call(this);